<!DOCTYPE html>
<html lang="pt-BR" data-bs-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Controle de Usuários</title>

  <!-- Fonts e CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />

  <style>
    body {
      background-color: var(--bs-body-bg);
      color: var(--bs-body-color);
      font-family: 'Inter', sans-serif;
    }

    .dark-toggle {
      cursor: pointer;
      font-size: 1.25rem;
      border: none;
      background: transparent;
      color: var(--bs-primary);
    }

    .is-valid {
      border-color: #22c55e !important;
      box-shadow: 0 0 0 0.2rem rgba(34, 197, 94, 0.25);
    }

    .is-invalid {
      border-color: #ef4444 !important;
      box-shadow: 0 0 0 0.2rem rgba(239, 68, 68, 0.25);
    }
  </style>
</head>
<body class="container py-5">

    <!-- Header -->
   <div class="d-flex justify-content-between mb-4">
    <h2 class="mb-4 text-primary fw-semibold">Controle De Usuários</h2>
    <div>
      <span class="dark-toggle me-2"><i class="bi bi-moon-stars-fill"></i></span>
      <button class="btn btn-outline-primary" onclick="window.location.href='index.html'">Voltar</button>
    </div>
  </div>

  <!-- Botão -->
  <button id="btnAddUsuario" class="btn btn-primary mb-3">Adicionar Usuário</button>

  <!-- Tabela -->
  <div class="table-responsive">
    <table class="table table-bordered table-striped">
      <thead class="table-light">
        <tr>
          <th>Telefone</th>
          <th>Nome</th>
          <th>Latitude</th>
          <th>Longitude</th>
          <th>Status</th>
          <th>Check-in</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="tabelaUsuarios"></tbody>
    </table>
  </div>

  <!-- Modal de Usuário -->
  <div class="modal fade" id="modalUsuario" tabindex="-1" aria-labelledby="modalUsuarioLabel" aria-hidden="true">
    <div class="modal-dialog">
      <form class="modal-content needs-validation" id="formUsuario" novalidate>
        <div class="modal-header">
          <h5 class="modal-title" id="modalUsuarioLabel">Adicionar Usuário</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <label for="telefone" class="form-label">Telefone</label>
            <input type="text" class="form-control" id="telefone" required />
            <div class="invalid-feedback">Telefone é obrigatório.</div>
          </div>
          <div class="mb-3">
            <label for="nome" class="form-label">Nome</label>
            <input type="text" class="form-control" id="nome" required />
            <div class="invalid-feedback">Nome é obrigatório.</div>
          </div>
          <div class="row g-3">
            <div class="col-md-6">
              <label for="latitude" class="form-label">Latitude</label>
              <input type="number" class="form-control" id="latitude" />
            </div>
            <div class="col-md-6">
              <label for="longitude" class="form-label">Longitude</label>
              <input type="number" class="form-control" id="longitude" />
            </div>
          </div>
          <div class="mt-3 mb-3">
            <label for="status" class="form-label">Status</label>
            <select class="form-select" id="status" required>
              <option value="">Selecione status</option>
              <option value="Normal">Normal</option>
              <option value="Ausente">Ausente</option>
              <option value="Desligado">Desligado</option>
            </select>
            <div class="invalid-feedback">Status é obrigatório.</div>
          </div>
          <div class="mt-3 mb-3">
            <label for="rota_id" class="form-label">Rota</label>
            <select class="form-select" id="rota_id">
             <option value="">-- Nenhuma rota --</option>
            </select>
          </div>
            <div class="form-check mb-3">
            <input type="checkbox" class="form-check-input" id="checkin" />
            <label class="form-check-label" for="checkin">Check-in realizado</label>
          </div>
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Salvar</button>
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/main.js"></script>
  <script>
    // Alternar Dark Mode e salvar no localStorage
    const toggleBtn = document.querySelector(".dark-toggle");
    const html = document.documentElement;

    // Restaurar tema salvo (se houver)
    const temaSalvo = localStorage.getItem("tema");
    if (temaSalvo) {
      html.setAttribute("data-bs-theme", temaSalvo);
    }

    toggleBtn.addEventListener("click", () => {
      const atual = html.getAttribute("data-bs-theme");
      const novoTema = atual === "dark" ? "light" : "dark";
      html.setAttribute("data-bs-theme", novoTema);
      localStorage.setItem("tema", novoTema);
    });
    document.getElementById("btnAddUsuario").addEventListener("click", () => {
    const modal = new bootstrap.Modal(document.getElementById("modalUsuario"));
    modal.show();
    carregarRotas()
});
  </script>
</body>
</html>
